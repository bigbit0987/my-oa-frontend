<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" 
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" 
             xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" 
             xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" 
             xmlns:flowable="http://flowable.org/bpmn" 
             targetNamespace="http://www.company.com/workflow" 
             exporter="Camunda Modeler" 
             exporterVersion="5.41.0">

  <process id="verification_handover_confirmation_process" name="核定交接确认单流程" isExecutable="true">
    <documentation>
      手动发起 - 核定交接确认单
      流程说明：交付人填写交接信息 -> 接收人确认 -> 监督人确认
    </documentation>

    <startEvent id="startEvent" name="开始" flowable:initiator="initiator" />
    
    <sequenceFlow id="flow_start_to_sender" sourceRef="startEvent" targetRef="task_sender_fill" />

    <userTask id="task_sender_fill" name="交付人填写交接信息" flowable:assignee="${initiator}" flowable:formKey="verification_handover_confirmation">
      <documentation>交付人填写交接日期、交接项目清单、上传附件</documentation>
    </userTask>

    <sequenceFlow id="flow_sender_to_receiver" sourceRef="task_sender_fill" targetRef="task_receiver_confirm" />

    <userTask id="task_receiver_confirm" name="接收人确认" flowable:assignee="${receiverId}" flowable:formKey="verification_handover_confirmation">
      <documentation>接收人确认交接内容并签字</documentation>
    </userTask>

    <sequenceFlow id="flow_receiver_to_supervisor" sourceRef="task_receiver_confirm" targetRef="task_supervisor_confirm" />

    <userTask id="task_supervisor_confirm" name="监督人确认" flowable:assignee="${supervisorId}" flowable:formKey="verification_handover_confirmation">
      <documentation>监督人确认交接过程并签字</documentation>
    </userTask>

    <sequenceFlow id="flow_supervisor_to_end" sourceRef="task_supervisor_confirm" targetRef="endEvent" />

    <endEvent id="endEvent" name="结束" />

  </process>

  <bpmndi:BPMNDiagram id="BPMNDiagram_ver_hand">
    <bpmndi:BPMNPlane id="BPMNPlane_ver_hand" bpmnElement="verification_handover_confirmation_process">
      <bpmndi:BPMNShape id="shape_startEvent" bpmnElement="startEvent">
        <omgdc:Bounds x="150" y="200" width="30" height="30" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape_task_sender_fill" bpmnElement="task_sender_fill">
        <omgdc:Bounds x="230" y="185" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape_task_receiver_confirm" bpmnElement="task_receiver_confirm">
        <omgdc:Bounds x="380" y="185" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape_task_supervisor_confirm" bpmnElement="task_supervisor_confirm">
        <omgdc:Bounds x="530" y="185" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape_endEvent" bpmnElement="endEvent">
        <omgdc:Bounds x="680" y="200" width="28" height="28" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
